-- 大規模なトラブルイベントを追加
-- より深刻な問題でゲームに緊張感を持たせる

-- 既存のカテゴリに新しいトラブルを追加
INSERT INTO troubles (name, name_ja, category, description, severity, impressed_points_loss) VALUES
  -- 金銭的トラブル（大損失）
  ('Major Theft', '強盗被害', 'robbery', '路上で突然グループに囲まれ、貴重品をすべて奪われてしまいました。パスポートや現金、クレジットカードまで失い、途方に暮れています。', 5, -80),
  ('Luggage Theft at Airport', '空港での荷物盗難', 'theft', 'チェックイン前にほんの数秒目を離した隙に、スーツケースごと盗まれてしまいました。旅の思い出の品々と高価な持ち物が全て失われました。', 4, -70),
  ('Tourist Scam', '悪質な観光詐欺', 'robbery', 'タクシーと偽った車に乗せられ、法外な料金を要求されました。拒否すると脅され、多額の現金を支払わざるを得ませんでした。', 4, -65),
  ('Pickpocket Gang', '組織的スリ集団', 'theft', '人混みの中で巧妙に財布やスマートフォンを抜き取られました。気づいた時には犯人グループは姿を消していました。', 4, -60),
  ('Overcharge Scam', 'ぼったくり被害', 'robbery', 'レストランで通常の10倍以上の料金を請求されました。メニューに書いていない追加料金を次々と加算され、高額な支払いを強いられました。', 3, -50),

  -- 自然災害・重大事故
  ('Major Earthquake', '大規模地震', 'fire', '滞在中に大きな地震が発生し、ホテルが損傷しました。避難所での生活を余儀なくされ、旅程が大幅に変更されました。', 5, -90),
  ('Typhoon Direct Hit', '台風直撃', 'flight_delay', '大型台風が直撃し、すべての交通機関が完全に麻痺しました。数日間ホテルに缶詰め状態で、次の目的地への移動が不可能になりました。', 5, -85),
  ('Volcanic Eruption', '火山噴火', 'fire', '近隣の火山が突然噴火し、火山灰で空港が閉鎖されました。空気も悪く、マスクなしでは外出できない状況が続いています。', 5, -100),
  ('Flash Flood', '鉄砲水被害', 'fire', '集中豪雨により鉄砲水が発生し、道路が寸断されました。一時的に孤立状態となり、救助を待つことになりました。', 4, -75),
  ('Building Fire', 'ホテル火災', 'fire', '宿泊していたホテルで火災が発生し、緊急避難することになりました。持ち物の一部を失い、新しい宿を探す羽目に。', 4, -70),

  -- 機体トラブル・重大遅延
  ('Engine Failure Return', 'エンジン故障で引き返し', 'engine_failure', '離陸後まもなくエンジンに異常が発生し、緊急着陸のため出発空港に引き返すことになりました。機内は緊張に包まれ、恐怖を感じました。', 4, -60),
  ('Emergency Landing', '緊急着陸', 'engine_failure', '飛行中に機体トラブルが発生し、予定外の空港に緊急着陸しました。安全は確保されましたが、大幅なスケジュール変更を余儀なくされました。', 4, -65),
  ('Hijacking Incident', 'ハイジャック事件', 'hijack', '機内で不審者が暴れ出し、パイロットが安全のため近隣の空港に着陸しました。乗客全員が取り調べを受け、予定より2日遅れとなりました。', 5, -95),

  -- ビザ・入国問題
  ('Visa Rejection', 'ビザ却下', 'flight_delay', '到着した空港でビザの不備が見つかり、入国を拒否されてしまいました。次の便で別の国に向かうことを余儀なくされました。', 4, -70),
  ('Political Unrest Entry Ban', '政情不安による入国禁止', 'flight_delay', '目的地で突然の政情不安が発生し、外国人の入国が一時的に禁止されました。空港で足止めを食らい、別の目的地を探すことになりました。', 4, -75),
  ('Border Closure', '国境封鎖', 'flight_delay', '国境が突然閉鎖され、予定していたルートでの移動が不可能になりました。大幅な迂回を強いられ、時間と費用が大きく増加しました。', 4, -80);

-- トラブル解消データも追加
INSERT INTO trouble_resolutions (trouble_id, helper_type, resolution_text, encouragement_text, impressed_points)
SELECT
  id,
  CASE
    WHEN name_ja = '強盗被害' THEN 'police'
    WHEN name_ja = '空港での荷物盗難' THEN 'police'
    WHEN name_ja = '悪質な観光詐欺' THEN 'detective'
    WHEN name_ja = '組織的スリ集団' THEN 'police'
    WHEN name_ja = 'ぼったくり被害' THEN 'local_person'
    WHEN name_ja = '大規模地震' THEN 'local_person'
    WHEN name_ja = '台風直撃' THEN 'tour_guide'
    WHEN name_ja = '火山噴火' THEN 'tour_guide'
    WHEN name_ja = '鉄砲水被害' THEN 'coast_guard'
    WHEN name_ja = 'ホテル火災' THEN 'firefighter'
    WHEN name_ja = 'エンジン故障で引き返し' THEN 'tour_guide'
    WHEN name_ja = '緊急着陸' THEN 'tour_guide'
    WHEN name_ja = 'ハイジャック事件' THEN 'police'
    WHEN name_ja = 'ビザ却下' THEN 'tour_guide'
    WHEN name_ja = '政情不安による入国禁止' THEN 'japanese_traveler'
    WHEN name_ja = '国境封鎖' THEN 'tour_guide'
  END,
  CASE
    WHEN name_ja = '強盗被害' THEN '警察が迅速に対応し、犯人グループの一部を逮捕してくれました。大使館のサポートで緊急のパスポート発行と帰国費用の援助を受けられました。地元の支援団体からも温かい援助の手が差し伸べられました。'
    WHEN name_ja = '空港での荷物盗難' THEN '警察と空港警備が協力して、防犯カメラの映像から犯人を特定しました。数日後、荷物の大部分が見つかり、無事に取り戻すことができました。空港からも補償を受けられました。'
    WHEN name_ja = '悪質な観光詐欺' THEN '観光警察の刑事が即座に動いてくれ、詐欺グループのアジトを急襲しました。被害金額を全額取り戻すことができ、グループは逮捕されました。同様の被害に遭った他の旅行者も救われました。'
    WHEN name_ja = '組織的スリ集団' THEN '警察が長年追っていたスリグループの逮捕に貢献しました。あなたの証言が決め手となり、被害金の大部分が戻ってきました。地元メディアにも取り上げられ、感謝状を受け取りました。'
    WHEN name_ja = 'ぼったくり被害' THEN '地元の親切な人が消費者保護団体に連絡してくれ、店側に不当な請求を認めさせることができました。過剰に支払った分は返金され、その店は営業停止処分を受けました。'
    WHEN name_ja = '大規模地震' THEN '地元の人々が避難所で献身的にサポートしてくれました。食事や毛布を分け合い、困難な状況でも人々の温かさに触れることができました。日本大使館も迅速に支援を提供してくれました。'
    WHEN name_ja = '台風直撃' THEN 'ツアーガイドが代替ルートと新しい宿泊施設を手配してくれました。台風が過ぎた後、被害を受けた地域の復興支援ボランティアに参加し、地元の人々と深い絆を築くことができました。'
    WHEN name_ja = '火山噴火' THEN '地元ガイドが安全な避難ルートを案内し、緊急の宿泊場所も確保してくれました。予想外の滞在でしたが、同じ境遇の旅行者たちと助け合い、生涯の友人ができました。'
    WHEN name_ja = '鉄砲水被害' THEN '海上保安隊が迅速に救助に来てくれ、全員が無事に避難できました。救助隊員の勇敢な行動に心を動かされ、困難な状況でも希望を持ち続けることができました。'
    WHEN name_ja = 'ホテル火災' THEN '消防隊が素早く消火活動を行い、大事には至りませんでした。ホテル側が全額補償してくれた上、より良いホテルを無料で手配してくれました。従業員の適切な避難誘導のおかげで、けが人も出ませんでした。'
    WHEN name_ja = 'エンジン故障で引き返し' THEN '航空会社が迅速に代替便を手配し、ファーストクラスへのアップグレードと宿泊費の全額補償をしてくれました。パイロットの冷静な判断で全員が無事だったことに、プロフェッショナリズムを感じました。'
    WHEN name_ja = '緊急着陸' THEN 'ツアーガイドが着陸先の空港で待機していて、すぐに新しい旅程を組み直してくれました。予想外の都市での一夜が、意外な発見と出会いをもたらしてくれました。'
    WHEN name_ja = 'ハイジャック事件' THEN '警察の特殊部隊が迅速に対応し、全員が無事に解放されました。事件後の心理カウンセリングや宿泊施設の提供など、手厚いサポートを受けられました。生命の大切さを改めて実感しました。'
    WHEN name_ja = 'ビザ却下' THEN 'ツアーガイドが別の魅力的な目的地を提案してくれ、その国でも素晴らしい経験ができました。「計画通りに行かないのも旅の醍醐味」という言葉に励まされました。'
    WHEN name_ja = '政情不安による入国禁止' THEN '同じ境遇の日本人旅行者と出会い、一緒に別のルートを探しました。予期せぬルート変更が、より興味深い場所の発見につながりました。ピンチをチャンスに変えることができました。'
    WHEN name_ja = '国境封鎖' THEN 'ツアーガイドが特別なルートを知っており、迂回して無事に目的地に到達できました。通常のルートでは見られない景色や文化に触れられ、結果的に貴重な経験となりました。'
  END,
  CASE
    WHEN name_ja = '強盗被害' THEN '本当に大変でしたね。でも無事で何よりです。こんな経験をしても旅を続けるあなたの勇気は素晴らしいです。'
    WHEN name_ja = '空港での荷物盗難' THEN '大切なものを取り戻せて良かったですね。この経験から学んだことも多いはずです。前を向いて進みましょう。'
    WHEN name_ja = '悪質な観光詐欺' THEN '被害を取り戻せただけでなく、他の人も救えました。あなたの勇気ある行動が多くの人を助けたんです。'
    WHEN name_ja = '組織的スリ集団' THEN '犯罪グループの逮捕に貢献できたのは素晴らしいことです。困難な経験が、社会貢献につながりました。'
    WHEN name_ja = 'ぼったくり被害' THEN '不正を正すことができて良かったです。あなたの行動が、他の旅行者を守ることになりました。'
    WHEN name_ja = '大規模地震' THEN '命が無事で何よりです。自然災害の恐ろしさと、人々の優しさの両方を経験しましたね。'
    WHEN name_ja = '台風直撃' THEN '自然の猛威は恐ろしいですが、それを乗り越えた経験は一生の宝物です。復興支援での経験も素晴らしいですね。'
    WHEN name_ja = '火山噴火' THEN '予想外の出来事でしたが、新しい友人ができたのは良かったですね。困難な時こそ、人との絆が深まります。'
    WHEN name_ja = '鉄砲水被害' THEN '無事に救助されて本当に良かったです。命の大切さを実感する経験でしたね。'
    WHEN name_ja = 'ホテル火災' THEN '怪我なく避難できて何よりです。結果的により良い宿に泊まれたのも、災い転じて福となすですね。'
    WHEN name_ja = 'エンジン故障で引き返し' THEN '恐怖を感じたと思いますが、パイロットの適切な判断で全員無事でした。航空会社の対応も素晴らしかったですね。'
    WHEN name_ja = '緊急着陸' THEN '予定外の場所での一夜が、意外な発見をもたらしてくれました。旅は計画通りにいかないことも楽しみの一つです。'
    WHEN name_ja = 'ハイジャック事件' THEN '非常に恐ろしい経験でしたが、無事で何よりです。生命の尊さを改めて感じる出来事でしたね。'
    WHEN name_ja = 'ビザ却下' THEN '入国できなかったのは残念ですが、別の素晴らしい場所に出会えました。旅には予期せぬ幸運もあります。'
    WHEN name_ja = '政情不安による入国禁止' THEN '計画変更は大変でしたが、新しい仲間と出会い、別のルートで素晴らしい経験ができましたね。'
    WHEN name_ja = '国境封鎖' THEN '迂回路が結果的に素晴らしい経験をもたらしてくれました。「災い転じて福となす」ですね。'
  END,
  CASE
    WHEN name_ja = '強盗被害' THEN 130
    WHEN name_ja = '空港での荷物盗難' THEN 110
    WHEN name_ja = '悪質な観光詐欺' THEN 120
    WHEN name_ja = '組織的スリ集団' THEN 115
    WHEN name_ja = 'ぼったくり被害' THEN 90
    WHEN name_ja = '大規模地震' THEN 140
    WHEN name_ja = '台風直撃' THEN 135
    WHEN name_ja = '火山噴火' THEN 150
    WHEN name_ja = '鉄砲水被害' THEN 125
    WHEN name_ja = 'ホテル火災' THEN 120
    WHEN name_ja = 'エンジン故障で引き返し' THEN 110
    WHEN name_ja = '緊急着陸' THEN 115
    WHEN name_ja = 'ハイジャック事件' THEN 145
    WHEN name_ja = 'ビザ却下' THEN 120
    WHEN name_ja = '政情不安による入国禁止' THEN 130
    WHEN name_ja = '国境封鎖' THEN 135
  END
FROM troubles
WHERE name_ja IN (
  '強盗被害', '空港での荷物盗難', '悪質な観光詐欺', '組織的スリ集団', 'ぼったくり被害',
  '大規模地震', '台風直撃', '火山噴火', '鉄砲水被害', 'ホテル火災',
  'エンジン故障で引き返し', '緊急着陸', 'ハイジャック事件',
  'ビザ却下', '政情不安による入国禁止', '国境封鎖'
);
